name: Test Self-Hosted Runner 'runner-sv'

on:
  push:
    branches:
      - main
  workflow_dispatch:
    inputs:
          action:
            description: 'Select Deployment Action'
            required: true
            type: choice
            default: 'deploy-and-test'
            options:
              - deploy-and-test
              - undeploy-only

          vs_service_name: 
            description: 'Virtual Service Name or ID'
            required: false
            type: string
            default: 'MyTestService'

jobs:
  my_sv_job:
    runs-on: self-hosted 
    
    steps:

      - name: â¬‡ï¸ Checkout Code
        uses: actions/checkout@v4

      - name: ğŸ‘‹ Test Runner
        run: echo "Job is running on the runner named 'runner-sv'."

      - name: ğŸ·ï¸ Show Runner Labels and Inputs
        run: |
          echo "Runner Label Test Complete."
          echo "Current Runner Labels: ${{ runner.labels }}"
          echo "User selected action: ${{ github.event.inputs.action }}"
          echo "Target Service Name/ID: ${{ github.event.inputs.vs_service_name }}"